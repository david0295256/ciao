> _**Gli exchange di token offrono servizi a coloro che vogliono comprare e vendere token. Agiscono come intermediari accreditati e market maker. Sebbene costituiscano una componente importante in questa nuova economia dei token, sono ancora prevalentemente centralizzati, il che li rende vulnerabili agli attacchi hacker, alla cattiva gestione, alla volatilità del volume o alla censura. Gli swap atomici e gli exchange decentralizzati cercano di mitigare questi rischi.**_

Mentre le reti blockchain e altri ledger distribuiti permettono il trasferimento di token senza intermediari, essi consentono solo l'invio di token da un wallet nella rete ad un altro wallet nella rete. Un token può essere gestito solo da un tipo di rete e non può muoversi automaticamente tra le reti per motivi di interoperabilità. Di conseguenza, la compravendita di token richiede ancora i servizi di exchange di token. Diversi exchange online offrono tali servizi e agiscono come intermediari di fiducia. Somigliano a banche online che prendono in custodia i token dei loro clienti e gestiscono il commercio di token tra gli utenti delle loro piattaforme. 

Per gli utenti, scambiare un token con un altro può essere difficile e può richiedere tempo, a seconda della popolarità e dello status legale di un particolare token. I token meno popolari o altamente controversi potrebbero essere quotati solo su exchange più piccoli con accoppiamenti di token limitati, il che significa che gli utenti dovrebbero (i) registrarsi in tutti questi exchange e (ii) scambiare i token diverse volte, prima di essere in grado di acquistare il token di interesse. Anche se molti token sono quotati sullo stesso exchange, gli abbinamenti di token, o gli abbinamenti token/fiat, sono spesso limitati. Come risultato di ciò, il trading di token può essere spesso dispendioso in termini di tempo e denaro. A volte, anche i token più famosi sono elencati su un solo exchange, costringendo gli utenti a scambiare su un exchange che altrimenti non userebbero. I potenziali acquirenti di un token potrebbero, pertanto, decidere di non comprare un certo token se è troppo complicato o troppo rischioso farlo. Gli exchange che quotano molti token sono diventati più popolari, in quanto offrono ai possessori di token uno sportello unico per comprare e vendere più tipi di token, senza la necessità di registrarsi su un altro exchange. 

Gli exchange di token possono decidere se includere o meno un token. Sono diventati i market maker e i nuovi gestori in questa emergente economia tokenizzata. Nell'agosto 2016, per esempio, quando la rete Ethereum ha eseguito il controverso hard fork come risultato della violazione di TheDAO[^1], la catena Ethereum più corta ("Ethereum Classic") non aveva alcun valore di mercato. Tuttavia, quando "[Poloniex](https://poloniex.com/)", un exchange online, ha deciso di quotare il token "Ethereum Classic", le dinamiche di mercato sono cambiate e anche altri exchange hanno iniziato a quotare lo stesso token. Anche se non era la prima volta che si verificava un fork in una rete blockchain, era la prima volta che il token di una catena minoritaria veniva quotato in un exchange, dando alla rete un valore economico.


#### Le sfide degli exchange centralizzati {#le-sfide-degli-exchange-centralizzati}

La maggior parte degli exchange oggi sono centralizzati (CEX) e svolgono servizi di intermediazione tra acquirenti e venditori di token. Permettono una semplice compravendita di token, anche a fronte di valute fiat, e forniscono una facile creazione di wallet e gestione dei token, compresa la salvaguardia delle chiavi private. A differenza di molti dei primi appassionati di criptovalute, che gestiscono ancora i loro token con un proprio wallet (portafoglio hardware, portafoglio software o portafoglio cartaceo), i nuovi arrivati spesso preferiscono esternalizzare la gestione dei wallet agli exchange online, che fungono da custodi dei loro token. Gli exchange centralizzati operano sulla classica tecnologia client-server e non sono soggetti agli stessi meccanismi di sicurezza delle reti blockchain. Anche se offrono servizi importanti, sono vulnerabili agli attacchi informatici, alla cattiva gestione, alla volatilità del volume o alla censura. Gli attacchi hacker e la cattiva gestione sono stati i maggiori problemi in passato, soprattutto nei primi anni, quando il mercato era meno maturo e non regolamentato. "[Mt. Gox](https://en.wikipedia.org/wiki/Mt._Gox)", che era il più grande exchange di Bitcoin all'epoca, sospese il trading e presentò istanza di fallimento nel 2014. A causa della cattiva gestione, circa 850.000 BTC sono scomparsi, molto probabilmente rubati. Molti altri casi seguirono, come "[Bitfinex](https://www.coindesk.com/bitfinex-bitcoin-hack-know-dont-know)" o "[Coincheck](https://fortune.com/2018/01/31/coincheck-hack-how/)". Questi incidenti hanno portato all'idea sbagliata nel grande pubblico secondo la quale le reti blockchain non sono sicure. 

Gli exchange centralizzati molto spesso non danno ai loro clienti il pieno controllo sulle loro chiavi private, in quanto scambiano sui propri registri, cioè fuori dalla catena. Spesso non hanno portafogli utente dedicati per i loro clienti, rendendo inutile una chiave privata. I clienti cedono il pieno controllo sui loro token. Gli exchange più piccoli che hanno meno liquidità sono esposti a volatilità dei prezzi, come crolli improvvisi ("flash crash") e impennate dei prezzi, se si verifica un cambiamento improvviso nella domanda e nell'offerta dei token. Ciò rende gli exchange più piccoli soggetti alla manipolazione del mercato e meno attraenti per gli utenti. Gli exchange centralizzati sono anche soggetti alla regolamentazione del governo e devono quindi soddisfare i requisiti KYC (know your customer) dei paesi, il che significa che i clienti devono identificarsi completamente quando si registrano su un exchange; ciò potrebbe sollevare problemi di privacy e censura.

L'interoperabilità generale della blockchain è una soluzione al problema della centralizzazione, che è attualmente affrontato da progetti come "[Cosmos](https://cosmos.network/)", "[Polkadot](https://polkadot.network)", "Wanchain", "Chainlink", "Arc", "Aion" e "AVA". Gli scambi atomici ("atomic swaps") sono un'altra soluzione, con una fattibilità più immediata.


## Swap atomici

Gli swap atomici permettono il commercio P2P cross-chain e possono essere eseguiti direttamente tra reti blockchain separate, da portafoglio a portafoglio, senza un intermediario di fiducia come un exchange. Usano un tipo di smart contract definito "hash time-locked contract" (HTLC) per proteggere la transazione in token, assicurandosi che entrambe le parti dello scambio di token soddisfino i requisiti. Gli HTLC sono simili ai canali statali che si occupano del regolamento dei pagamenti off-chain tramite smart contract (per approfondire: Appendice - Soluzioni di scalabilità). Gli utenti rimangono in pieno controllo delle loro chiavi private, e dei loro token, quando conducono un tale scambio.

Supponiamo che Alice e Bob vogliano scambiare token da diverse reti blockchain P2P senza un intermediario come un exchange. Bob vuole vendere da Bitcoin (BTC) a Litecoin (LTC), e Alice vuole vendere da Litecoin (LTC) a Bitcoin (BTC). Poiché le due reti non possono comunicare direttamente, Alice e Bob usano un contratto hash time-locked per bloccare i loro token per un periodo di tempo predefinito. Entrambi i destinatari, Bob e Alice, devono creare una prova crittografica di pagamento prima che il tempo scada. I token sono bloccati tramite multi-firma in uno smart contract. Questo stato di blocco è registrato su entrambe le reti. I token vengono scambiati solo se le loro chiavi segrete corrispondono. Per depositare i suoi token, Alice deve prima creare un HTLC. Crea una chiave segreta e genera un hash, da cui deriva l'indirizzo dello smart contract e a cui ora può inviare i suoi token. Invia anche questo hash a Bob, che può usare tale hash per replicare l'indirizzo dello smart contract e depositare i suoi token in quello smart contract. Alice può sbloccare i token depositati da Bob usando la sua chiave segreta, il che scatena un processo attraverso il quale Bob riceve la chiave segreta per sbloccare i token di Alice. In una transazione conclusiva, l'ultimo ordine viene inviato per essere aggiunto alla blockchain.

Gli swap atomici richiedono che (i) entrambe le parti dello swap devono scaricare il ledger di entrambe le reti; (ii) entrambe le reti che gestiscono i token scambiati devono supportare i contratti hash time-locked e utilizzare la stessa funzione hash crittografica. Inoltre, al fine di condurre transazioni da portafoglio a portafoglio, (iii) il wallet utilizzato deve disporre anche della compatibilità con gli swap atomici. 

Mentre gli swap atomici permettono lo scambio P2P di token, non risolvono il problema della coincidenza dei desideri. Saranno utili solo alle persone che conoscono altre persone disposte a comprare l'esatta quantità di token che uno vuole vendere precisamente nello stesso momento in cui si desidera venderli. La probabilità che questo accada per gli investitori retail è piuttosto bassa. Gli exchange decentralizzati che utilizzano swap atomici, tuttavia, potrebbero risolvere entrambi i problemi.

***
![Atomic Swaps](https://github.com/Token-Economy-Book/ItalianTranslation/blob/main/graphics/24_IT_AtomicSwaps.jpg)
***


## Exchange decentralizzati

Gli exchange decentralizzati (DEX) sono applicazioni decentralizzate che operano su un ledger distribuito per consentire agli utenti di scambiare token senza la necessità di un'istituzione che chiarisca gli accordi. Il commercio è regolato direttamente dal registro (on-chain) e potrebbe potenzialmente mitigare molte problematiche degli exchange centralizzati. Un exchange completamente decentralizzato farebbe uso di swap atomici, o metodi simili, con un livello di scoperta aggiuntivo che permette lo scambio tra due proprietari di token casuali che non si conoscono, che potrebbero vivere in paesi diversi, e che altrimenti non saprebbero come trovarsi a vicenda. Gli exchange decentralizzati esistenti forniscono vari livelli di decentralizzazione, spesso in esecuzione su un'infrastruttura parzialmente centralizzata, che non consente scambi da portafoglio a portafoglio. Gli esempi attuali sono “[Komodo](https://komodoplatform.com/)”, “[WavesDex](https://wavesplatform.com/products-exchange)”, “[OasisDex](https://developer.makerdao.com/oasis/)”, “[Radar Relay](https://radarrelay.com/)”, “BarterDex”, “[Bisq](https://bisq.network/)”, “StellarDex”, e “[EtherDelta](https://etherdelta.com/)”. 

La maggior parte degli exchange che si autoproclamano decentralizzati non lo sono (ancora) completamente e sono soggetti a molte criticità. A causa dei registri degli ordini sulla catena, sono anche lenti e costosi, almeno fino a quando i problemi di scalabilità delle reti blockchain pubbliche non saranno risolti. Ogni volta che un ordine viene inviato o modificato, questo genera un alto sovraccarico nei costi di transazione della rete e gonfia il registro. Attualmente, gli scambi decentralizzati favoriscono principalmente i trader che sono già presenti nei mercati dei token. I DEX non sono necessariamente adatti ai nuovi arrivati sul mercato, in quanto non risolvono la questione dello scambio di valute fiat nazionali in cambio di token. I neofiti del mercato dei cripto token probabilmente useranno ancora gli exchange centralizzati, che permettono loro di acquistare facilmente i token tramite valuta fiat. Gli attuali problemi di usabilità degli exchange decentralizzati contribuiscono ulteriormente alla bassa liquidità dei token e ai bassi volumi di scambio, che li rende inclini alla manipolazione del mercato. Tuttavia, una volta che queste problematiche saranno risolte, i DEX potrebbero consentire un mercato più liquido e meno sensibile alle manipolazioni, dove la domanda e l'offerta esisterebbero senza intermediari arbitrari.

Affinché gli exchange decentralizzati raggiungano un'adozione di massa, dobbiamo ancora raggiungere gli effetti di rete necessari. Questi effetti di rete dipendono da quando e come sarà risolta l'interoperabilità del ledger generale, compresi gli swap atomici cross-chain resilienti, gli standard di interoperabilità, o le soluzioni “piggyback” come il token "[Pantos](https://pantos.io/)". Inoltre, gli asset attuali, incluse le valute fiat, hanno bisogno di essere tokenizzati per catalizzare i necessari effetti di rete. Gli exchange decentralizzati probabilmente si concretizzeranno se e quando le transazioni quotidiane saranno prevalentemente regolate usando token crittografici e ledger distribuiti. Probabilmente avremo bisogno di una rete di scambi interconnessi per avere abbastanza profondità di mercato per un uso globale e diffuso degli exchange di token P2P.


### Riassunto del capitolo

> Un token può essere gestito solo da un tipo di rete e non può muoversi autonomamente tra le reti per motivi di interoperabilità. La compravendita di token richiede quindi i servizi di token exchange. Assomigliano a banche online che prendono in custodia i token dei loro clienti e gestiscono gli scambi di token tra gli utenti delle loro piattaforme.

> La maggior parte degli exchange oggi sono scambi centralizzati (CEX) e svolgono servizi di intermediazione tra acquirenti e venditori di token. Permettono una semplice compravendita di token, anche a fronte di valute fiat, e forniscono una facile creazione di portafogli e gestione dei token, compresa la salvaguardia delle chiavi private.

> Gli exchange decidono se includere o meno un token. Agiscono come intermediari di fiducia e market maker. Sono diventati i nuovi gestori in questa emergente economia tokenizzata.  Mentre rappresentano un elemento importante in questa nuova economia dei token, essi rimangono ancora prevalentemente centralizzati, il che li rende vulnerabili agli attacchi informatici, alla cattiva gestione, alla volatilità del volume o alla censura. Gli swap atomici e gli exchange decentralizzati cercano di mitigare questi rischi.

> Gli swap atomici permettono il commercio P2P cross-chain e possono essere eseguiti direttamente tra blockchain separate, da portafoglio a portafoglio, senza un intermediario affidabile come gli exchange. Usano un tipo di smart contract chiamato hash time-locked contract (HTLC) per garantire la transazione, assicurandosi che entrambe le parti dello scambio soddisfino i requisiti.

> Gli swap atomici non risolvono il problema della "coincidenza dei desideri". Essi favoriscono solo le persone che conoscono un'altra persona che è disposta a comprare l'esatta quantità di token nel medesimo momento.

> Gli exchange decentralizzati (DEX) sono applicazioni decentralizzate che operano su un ledger distribuito per consentire agli utenti di scambiare token senza la necessità di un'istituzione che chiarisca i regolamenti. Il commercio è regolato direttamente dal registro (on-chain). Essi combinano scambi atomici con algoritmi di corrispondenza per mitigare il problema della coincidenza dei desideri.

> Un exchange completamente decentralizzato farebbe uso di swap atomici, o metodi simili, con un livello di scoperta aggiuntivo che consente lo scambio tra due proprietari di token casuali che non si conoscono, che potrebbero vivere in paesi diversi, e che altrimenti non saprebbero come trovarsi a vicenda.


### Riferimenti e approfondimenti

* Borkowski, Michael; McDonald, Daniel; Ritzer, Christoph; Schulte, Stefan: “Towards Atomic Cross-Chain Token Transfers: State of the Art and Open Questions within TAST”, Pantos GmbH Vienna, May 2018, revised version 1.2, August 2018, retrieved from: https://www.dsg.tuwien.ac.at/projects/tast/pub/tast-white-paper-1.pdf
* Gazi Güçlütürk, Osman: “TheDAO Hack explained: Unfortunate take off of smart contracts”, Aug 1, 2018: https://medium.com/@ogucluturk/the-dao-hack-explained-unfortunate-take-off-of-smart-contracts-2bd8c8db3562
* Herlihy, Maurice: “Atomic Cross-Chain Swaps”, May 18, 2018: https://arxiv.org/pdf/1801.09515.pdf
* Higgins, Stan: "The Bitfinex Bitcoin Hack: What We Know (And Don’t Know),” Aug 3, 2016, updated Jun 20, 2018, retrieved from: https://www.coindesk.com/bitfinex-bitcoin-hack-know-dont-know
* Madeira, Antonio: “What Are Atomic Swaps?”, 28 Sep 2017: https://www.cryptocompare.com/coins/guides/what-are-atomic-swaps/
* N.N.: “How to Steal $500 Million in Cryptocurrency,” Fortune Magazine, January 31, 2018, retrieved from: EST https://fortune.com/2018/01/31/coincheck-hack-how/
* N.N.: “What Are Atomic Swaps?”, https://blockgeeks.com/guides/atomic-swaps/
* N.N“.: Komodo White Paper”, https://komodoplatform.com/wp-content/uploads/2018/04/2018-04-04-Komodo-White-Paper-Full.pdf
* N.N.: "5 Predictions for Our Security Token Futur" Coin Crunch, Jun 16, 2018: https://medium.com/hackernoon/5-predictions-for-our-security-token-futur-57ce9cf01256
* Noashh: ”With Atomic Swaps, Komodo Supports 95% Of All Coins In Existence!”, March 16, 2018: https://komodoplatform.com/komodo-now-covers-atomic-swaps-between-95-of-all-coins-in-existence/
* Binance: https://www.binance.com/en
* Bisq: https://bisq.network/
* EtherDelta: https://etherdelta.com/
* Komodo: https://komodoplatform.com/
* Mt. Gox Hack: https://en.wikipedia.org/wiki/Mt._Gox
* OasisDex: https://developer.makerdao.com/oasis/
* Pantos: https://pantos.io/
* Poloniex: https://poloniex.com/
* Radar Relay: https://radarrelay.com/
* WavesDex: https://wavesplatform.com/products-exchange


### Note a piè di pagina

[^1]:
Una vulnerabilità in una delle funzioni dello smart contract, progettata per rappresentare i diritti di minoranza, è stata usata per prosciugare 3,6 milioni di Ether dal bilancio di TheDAO (circa 150 milioni di dollari al momento)._
